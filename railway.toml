[build]
builder = "NIXPACKS"

[deploy]
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

[[services]]
name = "app"

[services.variables]
PORT = "8080"
SPRING_DATASOURCE_URL = "jdbc:postgresql://${{RAILWAY_PRIVATE_DOMAIN}:5432/railway"
SPRING_DATASOURCE_USERNAME = "${{POSTGRES_USER}}"
SPRING_DATASOURCE_PASSWORD = "${{POSTGRES_PASSWORD}}"
SPRING_JPA_HIBERNATE_DDL_AUTO = "update"
SPRING_JPA_DATABASE_PLATFORM = "org.hibernate.dialect.PostgreSQLDialect"
SERVER_ADDRESS = "0.0.0.0"